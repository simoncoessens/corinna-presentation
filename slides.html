<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Corinna | DSA Compliance Navigator — Presentation</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500&family=Instrument+Serif:ital@0;1&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet" />
<style>
  :root {
    --bg: #fafaf9;
    --fg: #0a0a0a;
    --text-secondary: #57534e;
    --text-muted: #78716c;
    --text-faint: #a8a29e;
    --border: #e7e5e4;
    --border-strong: #d6d3d1;
    --accent: #0a0a0a;
    --accent-soft: rgba(10, 10, 10, 0.05);
    --font-serif: 'Instrument Serif', Georgia, serif;
    --font-sans: 'DM Sans', system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', monospace;
  }

  *, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html, body {
    height: 100%;
    overflow: hidden;
    background: var(--fg);
  }

  body {
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .deck {
    position: relative;
    width: 100vw;
    height: 100vh;
  }

  .slide {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    background: url('background_preview.png') center / cover no-repeat;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .slide.active {
    opacity: 1;
    pointer-events: auto;
  }

  .slide-inner {
    position: relative;
    z-index: 1;
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 64px 80px;
    overflow: hidden;
  }

  h1, h2, h3 {
    font-family: var(--font-serif);
    color: var(--fg);
    font-weight: 400;
    line-height: 1.05;
  }

  p, li, span {
    color: var(--text-secondary);
  }

  .mono {
    font-family: var(--font-mono);
  }

  .progress-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    height: 2px;
    background: var(--fg);
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 100;
  }

  .slide-number {
    position: fixed;
    bottom: 20px;
    right: 40px;
    font-family: var(--font-mono);
    font-size: 12px;
    color: var(--text-faint);
    z-index: 100;
    letter-spacing: 0.05em;
  }

  .nav-hint {
    position: fixed;
    bottom: 20px;
    left: 40px;
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--text-faint);
    z-index: 100;
    opacity: 0.6;
    transition: opacity 0.3s;
  }

  .nav-hint:hover { opacity: 1; }

  .flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
  }

  .flex-col { flex-direction: column; }
  .text-center { text-align: center; }

  .gap-sm { gap: 12px; }
  .gap-md { gap: 24px; }
  .gap-lg { gap: 40px; }
  .gap-xl { gap: 64px; }

  .mt-auto { margin-top: auto; }

  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 48px;
    flex: 1;
    align-items: center;
  }

  .grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 40px;
    flex: 1;
    align-items: start;
  }

  .divider {
    width: 48px;
    height: 1px;
    background: var(--border-strong);
  }

  .square-icon {
    width: 56px;
    height: 56px;
    background: var(--accent-soft);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .square-icon svg {
    width: 24px;
    height: 24px;
    stroke: var(--fg);
    fill: none;
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  .tag {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-family: var(--font-mono);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--text-muted);
  }

  .tag-dot {
    width: 6px;
    height: 6px;
    background: var(--fg);
  }

  .card {
    border: 1px solid var(--border);
    padding: 32px;
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(8px);
  }

  .step-number {
    width: 32px;
    height: 32px;
    background: var(--fg);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    font-size: 13px;
    flex-shrink: 0;
  }

  ul.clean {
    list-style: none;
    padding: 0;
  }

  ul.clean li {
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
    font-size: 18px;
    line-height: 1.6;
    display: flex;
    align-items: baseline;
    gap: 16px;
  }

  ul.clean li:last-child {
    border-bottom: none;
  }

  ul.clean li::before {
    content: '';
    width: 4px;
    height: 4px;
    background: var(--fg);
    flex-shrink: 0;
    transform: translateY(2px);
  }

  blockquote {
    border-left: 2px solid var(--fg);
    padding-left: 24px;
    font-family: var(--font-serif);
    font-style: italic;
    font-size: 28px;
    line-height: 1.4;
    color: var(--fg);
    max-width: 640px;
  }

  /* ── Animations ── */
  .slide.active .anim-fade {
    animation: fadeUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) both;
  }

  .slide.active .anim-d1 { animation-delay: 0.1s; }
  .slide.active .anim-d2 { animation-delay: 0.2s; }
  .slide.active .anim-d3 { animation-delay: 0.3s; }
  .slide.active .anim-d4 { animation-delay: 0.4s; }
  .slide.active .anim-d5 { animation-delay: 0.5s; }
  .slide.active .anim-d6 { animation-delay: 0.6s; }
  .slide.active .anim-d7 { animation-delay: 0.7s; }
  .slide.active .anim-d8 { animation-delay: 0.8s; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .slide.active .anim-line {
    animation: lineGrow 0.6s cubic-bezier(0.4, 0, 0.2, 1) both;
  }

  @keyframes lineGrow {
    from { opacity: 0; transform: scaleX(0); }
    to { opacity: 1; transform: scaleX(1); }
  }

  /* ── Sub-steps for multi-click slides ── */
  .substep {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .substep.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .slide-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 24px;
    border-top: 1px solid var(--border);
    margin-top: auto;
  }

  .slide-footer span {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--text-faint);
    letter-spacing: 0.05em;
  }

  .slide-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-bottom: 32px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 40px;
  }

  .slide-header .logo {
    font-family: var(--font-serif);
    font-size: 24px;
    color: var(--fg);
  }

  .pipeline {
    display: flex;
    align-items: center;
    gap: 0;
  }

  .pipeline-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 0 24px;
    text-align: center;
  }

  .pipeline-line {
    width: 48px;
    height: 1px;
    background: var(--border-strong);
    transform-origin: left;
  }

  /* ── Blank slide placeholder ── */
  .blank-placeholder {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px dashed var(--border-strong);
    margin: 20px 0;
  }

  .blank-placeholder p {
    font-family: var(--font-mono);
    font-size: 14px;
    color: var(--text-faint);
    text-align: center;
    line-height: 1.8;
  }

  /* ── Flow diagram ── */
  .flow-container {
    display: flex;
    align-items: stretch;
    gap: 0;
    flex: 1;
  }

  .flow-step {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 28px;
    border: 1px solid var(--border);
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(8px);
    position: relative;
  }

  .flow-step + .flow-step {
    border-left: none;
  }

  .flow-arrow {
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: 10px solid var(--border-strong);
    align-self: center;
    flex-shrink: 0;
  }
</style>
</head>
<body>

<div class="deck" id="deck">

  <!-- ============================
       SLIDE 1 — Title
       ============================ -->
  <div class="slide active">
    <div class="slide-inner flex-center flex-col gap-md text-center" style="position: relative;">
      <div class="anim-fade anim-d1" style="position: absolute; top: 32px; right: 40px; display: flex; align-items: center; gap: 24px;">
        <img src="Santanna_logo.png" alt="Sant'Anna" style="height: 80px; object-fit: contain;" />
        <img src="bari_logo.png" alt="Università di Bari" style="height: 56px; object-fit: contain;" />
      </div>
      <div class="anim-fade anim-d1 tag" style="margin-bottom: 8px;">
        <span class="tag-dot"></span>
        <span>SNIP — PRIN-PNRR 2023</span>
      </div>
      <h1 class="anim-fade anim-d2" style="font-size: clamp(64px, 10vw, 140px); letter-spacing: -0.02em;">Corinna</h1>
      <div class="anim-fade anim-d3 divider anim-line" style="margin: 8px auto;"></div>
      <p class="anim-fade anim-d4" style="font-style: italic; font-size: 20px; max-width: 600px; letter-spacing: 0.02em;">
        Conversational Risk Navigator for DSA Normative Assessment
      </p>
      <div class="anim-fade anim-d5 mt-auto" style="margin-top: 80px;">
        <p class="mono" style="font-size: 12px; color: var(--text-faint);">
          Simon Coessens &middot; Vittorio Franzese &middot; February 2026
        </p>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 2 — What is Corinna
       ============================ -->
  <div class="slide">
    <div class="slide-inner">
      <div class="slide-header anim-fade anim-d1">
        <span class="logo">Corinna</span>
        <span class="tag"><span class="tag-dot"></span> Introduction</span>
      </div>
      <div class="grid-2" style="align-items: start;">
        <div style="display: flex; flex-direction: column; gap: 24px;">
          <h2 class="anim-fade anim-d2" style="font-size: 44px;">What is Corinna?</h2>
          <p class="anim-fade anim-d3" style="font-size: 18px; line-height: 1.7; max-width: 480px;">
            An AI-powered DSA compliance assistant.
          </p>
          <ul class="clean anim-fade anim-d4" style="max-width: 480px;">
            <li style="font-size: 16px;">Researches a company automatically</li>
            <li style="font-size: 16px;">Classifies it under the DSA framework</li>
            <li style="font-size: 16px;">Produces tailored obligations &amp; action items</li>
            <li style="font-size: 16px;">Grounded in the actual legal text</li>
          </ul>
        </div>
        <div style="display: flex; flex-direction: column; gap: 0;">
          <ul class="clean">
            <li class="anim-fade anim-d4">Does the DSA apply to my business?</li>
            <li class="anim-fade anim-d5">What category does my service fall into?</li>
            <li class="anim-fade anim-d6">Which specific obligations apply?</li>
            <li class="anim-fade anim-d7">What concrete steps should I take?</li>
          </ul>
        </div>
      </div>
      <div class="slide-footer anim-fade anim-d8">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 3 — Legal Background (blank for friend)
       ============================ -->
  <div class="slide">
    <div class="slide-inner">
      <div class="slide-header anim-fade anim-d1">
        <span class="logo">Corinna</span>
        <span class="tag"><span class="tag-dot"></span> Legal Background</span>
      </div>
      <div class="blank-placeholder anim-fade anim-d2">
        <p>
          Legal background content goes here.<br/>
          DSA overview, regulatory context, why compliance matters.<br/><br/>
          <span style="color: var(--border-strong);">&mdash; to be filled in &mdash;</span>
        </p>
      </div>
      <div class="slide-footer anim-fade anim-d8">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 4 — Demo
       ============================ -->
  <div class="slide">
    <div class="slide-inner">
      <div class="slide-header anim-fade anim-d1">
        <span class="logo">Corinna</span>
        <span class="tag"><span class="tag-dot"></span> Demo</span>
      </div>
      <div class="flex-center flex-col gap-md" style="flex: 1;">
        <h2 class="anim-fade anim-d2" style="font-size: 40px;">Live demonstration</h2>
        <a class="anim-fade anim-d3" href="https://www.corinna.legal" target="_blank" rel="noopener" style="font-family: var(--font-mono); font-size: 22px; color: var(--fg); text-decoration: none; border-bottom: 2px solid var(--fg); padding-bottom: 2px; transition: opacity 0.2s; cursor: pointer;">www.corinna.legal</a>
      </div>
      <div class="slide-footer anim-fade anim-d8">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 5 — Technical Section Title
       ============================ -->
  <div class="slide">
    <div class="slide-inner flex-center flex-col gap-md text-center">
      <div class="anim-fade anim-d1 tag" style="margin-bottom: 8px;">
        <span class="tag-dot"></span>
        <span>Technical Deep-Dive</span>
      </div>
      <h1 class="anim-fade anim-d2" style="font-size: clamp(48px, 7vw, 96px); letter-spacing: -0.02em;">How it works</h1>
      <div class="anim-fade anim-d3 divider anim-line" style="margin: 8px auto;"></div>
      <p class="anim-fade anim-d4" style="font-style: italic; font-size: 18px; max-width: 480px; color: var(--text-muted);">
        A multi-agent system for DSA compliance assessment
      </p>
    </div>
  </div>

  <!-- ============================
       SLIDE 6 — Architecture Overview
       ============================ -->
  <div class="slide">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 32px;">
        <h2 class="anim-fade anim-d1" style="font-size: 38px;">The Agents</h2>
        <div class="anim-fade anim-d1" style="display: flex; align-items: center; gap: 16px;">
          <img src="langgraph_logo.png" alt="LangGraph" style="height: 40px; object-fit: contain;" />
          <img src="deepseek_logo.png" alt="DeepSeek" style="height: 20px; object-fit: contain;" />
          <img src="logo_tavily.png" alt="Tavily" style="height: 18px; object-fit: contain;" />
        </div>
      </div>

      <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 32px;">

        <!-- The 4 agents as a pipeline -->
        <div style="display: flex; align-items: stretch; gap: 0;">
          <div class="flow-step anim-fade anim-d2" style="padding: 24px;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
              <div class="step-number">1</div>
              <h3 style="font-size: 16px;">Company Matcher</h3>
            </div>
            <p style="font-size: 13px; line-height: 1.5; color: var(--text-muted); margin-bottom: 14px;">
              Identify the exact legal entity
            </p>
            <div style="display: flex; gap: 6px; flex-wrap: wrap;">
              <span class="mono" style="font-size: 9px; padding: 3px 8px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.04em;">Web Search</span>
            </div>
          </div>
          <div class="flow-step anim-fade anim-d3" style="padding: 24px;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
              <div class="step-number">2</div>
              <h3 style="font-size: 16px;">Deep Research</h3>
            </div>
            <p style="font-size: 13px; line-height: 1.5; color: var(--text-muted); margin-bottom: 14px;">
              16 parallel sub-agents research the company
            </p>
            <div style="display: flex; gap: 6px; flex-wrap: wrap;">
              <span class="mono" style="font-size: 9px; padding: 3px 8px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.04em;">Web Search</span>
            </div>
          </div>
          <div class="flow-step anim-fade anim-d4" style="padding: 24px; background: rgba(10,10,10,0.03);">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
              <div class="step-number" style="background: transparent; border: 1.5px solid var(--fg); color: var(--fg);">&#10003;</div>
              <h3 style="font-size: 16px;">Human Validation</h3>
            </div>
            <p style="font-size: 13px; line-height: 1.5; color: var(--text-muted); margin-bottom: 14px;">
              User reviews and confirms all findings
            </p>
            <div style="display: flex; gap: 6px; flex-wrap: wrap;">
              <span class="mono" style="font-size: 9px; padding: 3px 8px; border: 1px solid var(--border-strong); color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.04em;">Manual</span>
            </div>
          </div>
          <div class="flow-step anim-fade anim-d5" style="padding: 24px;">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
              <div class="step-number">3</div>
              <h3 style="font-size: 16px;">Assessment</h3>
            </div>
            <p style="font-size: 13px; line-height: 1.5; color: var(--text-muted); margin-bottom: 14px;">
              Evaluate each DSA article against the profile
            </p>
            <div style="display: flex; gap: 6px; flex-wrap: wrap;">
              <span class="mono" style="font-size: 9px; padding: 3px 8px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.04em;">RAG on DSA</span>
            </div>
          </div>
        </div>

        <!-- Corinna Chat bar spanning underneath -->
        <div class="anim-fade anim-d6" style="display: flex; align-items: center; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); background: rgba(255,255,255,0.4);">
          <svg viewBox="0 0 24 24" style="width: 18px; height: 18px; stroke: var(--fg); fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round; flex-shrink: 0;"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
          <span style="font-size: 14px; color: var(--fg); font-weight: 500;">Corinna Chat</span>
          <span style="font-size: 13px; color: var(--text-muted);">&mdash; available at every step</span>
          <div style="margin-left: auto; display: flex; gap: 6px;">
            <span class="mono" style="font-size: 9px; padding: 3px 8px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.04em;">RAG on DSA</span>
          </div>
        </div>

        <!-- ReAct pattern + tools legend -->
        <div class="anim-fade anim-d7" style="display: flex; gap: 24px; align-items: stretch;">
          <div style="flex: 1; padding: 20px 24px; border: 1px solid var(--border); background: rgba(255,255,255,0.4);">
            <span class="tag" style="margin-bottom: 12px;"><span class="tag-dot"></span> ReAct Pattern</span>
            <div style="display: flex; align-items: center; gap: 12px; margin-top: 10px;">
              <span class="mono" style="font-size: 12px; padding: 4px 10px; background: var(--fg); color: white;">Reason</span>
              <span style="color: var(--text-faint);">&rarr;</span>
              <span class="mono" style="font-size: 12px; padding: 4px 10px; background: var(--fg); color: white;">Act</span>
              <span style="color: var(--text-faint);">&rarr;</span>
              <span class="mono" style="font-size: 12px; padding: 4px 10px; background: var(--fg); color: white;">Observe</span>
              <span style="color: var(--text-faint);">&rarr;</span>
              <span class="mono" style="font-size: 12px; padding: 4px 10px; border: 1px solid var(--border-strong); color: var(--text-muted);">&#8635; loop</span>
            </div>
            <p style="font-size: 12px; color: var(--text-muted); margin-top: 10px; line-height: 1.5;">All agents follow this loop &mdash; tools before decisions</p>
          </div>
          <div style="padding: 20px 24px; border: 1px solid var(--border); background: rgba(255,255,255,0.4); display: flex; flex-direction: column; gap: 10px; min-width: 220px;">
            <span class="tag"><span class="tag-dot"></span> Tools</span>
            <div style="display: flex; align-items: center; gap: 10px; margin-top: 4px;">
              <img src="logo_tavily.png" alt="Tavily" style="height: 14px;" />
              <span style="font-size: 13px; color: var(--text-secondary);">Web Search</span>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; stroke: var(--fg); fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round;"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
              <span style="font-size: 13px; color: var(--text-secondary);">RAG on DSA text</span>
            </div>
          </div>
        </div>

      </div>

      <div class="slide-footer anim-fade anim-d8">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 6 — Company Matcher (multi-step)
       ============================ -->
  <div class="slide" data-steps="7">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 28px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div class="step-number" style="width: 40px; height: 40px; font-size: 16px;">1</div>
          <h2 style="font-size: 38px;">Company Matcher</h2>
        </div>
        <div style="display: flex; align-items: center; gap: 16px;">
          <img src="langgraph_logo.png" alt="LangGraph" style="height: 40px; object-fit: contain;" />
          <img src="deepseek_logo.png" alt="DeepSeek" style="height: 20px; object-fit: contain;" />
          <img src="logo_tavily.png" alt="Tavily" style="height: 18px; object-fit: contain;" />
        </div>
      </div>

      <div style="display: flex; gap: 24px; margin-bottom: 24px; font-size: 14px;">
        <span style="color: var(--text-secondary);">ReAct agent with web search</span>
        <span style="color: var(--text-faint);">&middot;</span>
        <span style="color: var(--text-secondary);">Up to 4 iterations</span>
        <span style="color: var(--text-faint);">&middot;</span>
        <span style="color: var(--text-secondary);">Identifies the exact legal entity</span>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; flex: 1; align-items: start;">

        <!-- Left column: animated agent trace -->
        <div style="display: flex; flex-direction: column; gap: 0; border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">

          <!-- Step 0: Input (visible on slide enter) -->
          <div class="substep" data-substep="0" style="padding: 14px 20px; border-bottom: 1px solid var(--border); background: var(--accent-soft);">
            <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.08em;">Input</span>
            <p style="font-size: 14px; color: var(--fg); font-weight: 500; margin-top: 4px;">&ldquo;Apple&rdquo; &mdash; United States</p>
          </div>

          <!-- Step 1: Reason 1 -->
          <div class="substep" data-substep="1" style="padding: 14px 20px; border-bottom: 1px solid var(--border);">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
              <span class="mono" style="font-size: 9px; padding: 2px 6px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.05em;">Reason</span>
              <span style="font-size: 12px; color: var(--text-muted);">Iteration 1</span>
            </div>
            <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5; font-style: italic;">
              &ldquo;Apple&rdquo; is ambiguous &mdash; could be Apple Inc. (tech), Apple Records, Apple Bank. I need to search with country context to disambiguate.
            </p>
          </div>

          <!-- Step 2: Search 1 -->
          <div class="substep" data-substep="2" style="padding: 14px 20px; border-bottom: 1px solid var(--border); background: rgba(250,250,249,0.5);">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
              <span class="mono" style="font-size: 9px; padding: 2px 6px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.05em;">Search</span>
              <img src="logo_tavily.png" alt="" style="height: 12px;" />
            </div>
            <p class="mono" style="font-size: 12px; color: var(--fg);">&ldquo;Apple company United States digital services&rdquo;</p>
            <p style="font-size: 11px; color: var(--text-faint); margin-top: 4px; line-height: 1.4;">
              &rarr; Apple Inc. &mdash; Cupertino, CA. Consumer electronics, software, and online services. CEO: Tim Cook. NASDAQ: AAPL.
            </p>
          </div>

          <!-- Step 3: Reason 2 -->
          <div class="substep" data-substep="3" style="padding: 14px 20px; border-bottom: 1px solid var(--border);">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
              <span class="mono" style="font-size: 9px; padding: 2px 6px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.05em;">Reason</span>
              <span style="font-size: 12px; color: var(--text-muted);">Iteration 2</span>
            </div>
            <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5; font-style: italic;">
              Strong match for Apple Inc. Let me verify their EU digital services presence &mdash; this is needed to confirm DSA relevance.
            </p>
          </div>

          <!-- Step 4: Search 2 -->
          <div class="substep" data-substep="4" style="padding: 14px 20px; border-bottom: 1px solid var(--border); background: rgba(250,250,249,0.5);">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
              <span class="mono" style="font-size: 9px; padding: 2px 6px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.05em;">Search</span>
              <img src="logo_tavily.png" alt="" style="height: 12px;" />
            </div>
            <p class="mono" style="font-size: 12px; color: var(--fg);">&ldquo;Apple Inc digital services EU App Store iCloud&rdquo;</p>
            <p style="font-size: 11px; color: var(--text-faint); margin-top: 4px; line-height: 1.4;">
              &rarr; Apple operates App Store, iCloud, Apple Music, Apple TV+ across all EU member states. EU entity: Apple Distribution International Ltd, Cork, Ireland.
            </p>
          </div>

          <!-- Step 5: Decision -->
          <div class="substep" data-substep="5" style="padding: 14px 20px; background: var(--accent-soft);">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
              <span class="mono" style="font-size: 9px; padding: 2px 6px; background: var(--fg); color: white; text-transform: uppercase; letter-spacing: 0.05em;">Decision</span>
              <span style="font-size: 12px; color: var(--text-muted);">Confident after 2 iterations</span>
            </div>
            <p style="font-size: 13px; color: var(--fg); font-weight: 500;">
              Match: Apple Inc. &mdash; apple.com
            </p>
          </div>

        </div>

        <!-- Right column -->
        <div style="display: flex; flex-direction: column; gap: 16px;">

          <!-- ReAct explanation (always visible) -->
          <div class="card" style="padding: 20px;">
            <span class="tag" style="margin-bottom: 10px;"><span class="tag-dot"></span> ReAct Pattern</span>
            <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
              <div style="display: flex; align-items: center; gap: 10px;">
                <span class="mono" style="font-size: 10px; padding: 3px 8px; background: var(--fg); color: white;">1</span>
                <p style="font-size: 13px; line-height: 1.4;"><strong style="color: var(--fg);">Reason</strong> &mdash; Analyze what&rsquo;s known, plan next action</p>
              </div>
              <div style="display: flex; align-items: center; gap: 10px;">
                <span class="mono" style="font-size: 10px; padding: 3px 8px; background: var(--fg); color: white;">2</span>
                <p style="font-size: 13px; line-height: 1.4;"><strong style="color: var(--fg);">Act</strong> &mdash; Execute a web search via Tavily</p>
              </div>
              <div style="display: flex; align-items: center; gap: 10px;">
                <span class="mono" style="font-size: 10px; padding: 3px 8px; background: var(--fg); color: white;">3</span>
                <p style="font-size: 13px; line-height: 1.4;"><strong style="color: var(--fg);">Observe</strong> &mdash; Evaluate results, loop or stop</p>
              </div>
              <div style="display: flex; align-items: center; gap: 10px;">
                <span class="mono" style="font-size: 10px; padding: 3px 8px; border: 1px solid var(--border-strong); color: var(--text-muted);">&#8635;</span>
                <p style="font-size: 13px; line-height: 1.4; color: var(--text-muted);">Up to 4 iterations, stops early when confident</p>
              </div>
            </div>
          </div>

          <!-- Result card (appears with decision) -->
          <div class="substep" data-substep="6">
            <div class="card" style="padding: 20px; border: 2px solid var(--fg);">
              <span class="tag" style="margin-bottom: 10px;"><span class="tag-dot"></span> Final Match</span>
              <div style="margin-top: 8px;">
                <p style="font-size: 20px; color: var(--fg); font-weight: 500; font-family: var(--font-serif);">Apple Inc.</p>
                <p style="font-size: 13px; color: var(--text-muted); margin-top: 6px;">apple.com &middot; Cupertino, CA, United States</p>
                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border);">
                  <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                    Multinational technology company that designs, develops, and sells consumer electronics, software, and digital services. Operates the App Store, iCloud, Apple Music, and Apple TV+ across all EU member states through its EU subsidiary Apple Distribution International Ltd, based in Cork, Ireland.
                  </p>
                </div>
                <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between;">
                  <p class="mono" style="font-size: 10px; color: var(--text-faint);">Confidence: high</p>
                  <p class="mono" style="font-size: 10px; color: var(--fg); background: var(--accent-soft); padding: 3px 10px;">Awaiting user confirmation &rarr;</p>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

      <div class="slide-footer">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 7 — Deep Research: Overview
       ============================ -->
  <div class="slide" data-steps="3">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 32px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div class="step-number" style="width: 40px; height: 40px; font-size: 16px;">2</div>
          <h2 style="font-size: 38px;">Deep Research</h2>
        </div>
        <div style="display: flex; align-items: center; gap: 16px;">
          <img src="langgraph_logo.png" alt="LangGraph" style="height: 40px; object-fit: contain;" />
          <img src="deepseek_logo.png" alt="DeepSeek" style="height: 20px; object-fit: contain;" />
          <img src="logo_tavily.png" alt="Tavily" style="height: 18px; object-fit: contain;" />
        </div>
      </div>

      <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 32px;">

        <!-- Step 0: Input from Company Matcher -->
        <div class="substep" data-substep="0">
          <div style="display: flex; align-items: center; gap: 20px; padding: 16px 24px; border: 1px solid var(--border); background: var(--accent-soft); max-width: 560px;">
            <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.08em; flex-shrink: 0;">From Step 1</span>
            <div>
              <p style="font-size: 18px; color: var(--fg); font-weight: 500; font-family: var(--font-serif);">Apple Inc.</p>
              <p style="font-size: 13px; color: var(--text-muted); margin-top: 2px;">apple.com &middot; Cupertino, CA &middot; Consumer electronics, software, digital services</p>
            </div>
          </div>
        </div>

        <!-- Step 1: Fan-out visual -->
        <div class="substep" data-substep="1">
          <div style="display: flex; align-items: stretch; gap: 0;">
            <div style="width: 140px; display: flex; align-items: center; justify-content: center; background: var(--fg); padding: 20px;">
              <div style="text-align: center;">
                <p style="font-size: 36px; color: white; font-family: var(--font-serif); line-height: 1;">16</p>
                <p style="font-size: 11px; color: rgba(255,255,255,0.6); margin-top: 4px;">parallel<br/>agents</p>
              </div>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; gap: 0;">
              <div style="flex: 1; display: flex; align-items: center; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); border-left: 3px solid var(--fg); background: rgba(255,255,255,0.5);">
                <div class="step-number" style="width: 28px; height: 28px; font-size: 11px;">1</div>
                <div>
                  <p style="font-size: 15px; color: var(--fg); font-weight: 500;">Geographical Scope</p>
                  <p style="font-size: 12px; color: var(--text-muted);">8 questions &mdash; EU presence, users, languages, currencies, accessibility</p>
                </div>
                <span class="mono" style="font-size: 11px; color: var(--text-faint); margin-left: auto;">q00&ndash;q07</span>
              </div>
              <div style="flex: 1; display: flex; align-items: center; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); border-top: none; border-left: 3px solid var(--fg); background: rgba(255,255,255,0.5);">
                <div class="step-number" style="width: 28px; height: 28px; font-size: 11px;">2</div>
                <div>
                  <p style="font-size: 15px; color: var(--fg); font-weight: 500;">Company Size</p>
                  <p style="font-size: 12px; color: var(--text-muted);">2 questions &mdash; staff count, turnover (micro/small enterprise exemption)</p>
                </div>
                <span class="mono" style="font-size: 11px; color: var(--text-faint); margin-left: auto;">q08&ndash;q09</span>
              </div>
              <div style="flex: 1; display: flex; align-items: center; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); border-top: none; border-left: 3px solid var(--fg); background: rgba(255,255,255,0.5);">
                <div class="step-number" style="width: 28px; height: 28px; font-size: 11px;">3</div>
                <div>
                  <p style="font-size: 15px; color: var(--fg); font-weight: 500;">Type of Service</p>
                  <p style="font-size: 12px; color: var(--text-muted);">6 questions &mdash; conduit, caching, hosting, platform, search engine, marketplace</p>
                </div>
                <span class="mono" style="font-size: 11px; color: var(--text-faint); margin-left: auto;">q10&ndash;q15</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2: Key insight -->
        <div class="substep" data-substep="2">
          <div style="display: flex; align-items: start; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); background: rgba(255,255,255,0.5); max-width: 700px;">
            <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; stroke: var(--fg); fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round; flex-shrink: 0; margin-top: 2px;"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
            <div style="display: flex; flex-direction: column; gap: 4px;">
              <p style="font-size: 14px; color: var(--fg); font-weight: 500;">Each agent receives a legal brief</p>
              <p style="font-size: 13px; color: var(--text-muted);">Explains what to search for and why it matters under the DSA</p>
              <p style="font-size: 13px; color: var(--text-muted);">Questions map directly to the classification criteria used in the assessment</p>
            </div>
          </div>
        </div>

      </div>

      <div class="slide-footer">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 8 — Deep Research: The 16 Questions
       ============================ -->
  <div class="slide" data-steps="3">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 28px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div class="step-number" style="width: 40px; height: 40px; font-size: 16px;">2</div>
          <h2 style="font-size: 38px;">The 16 Questions</h2>
        </div>
        <span class="tag"><span class="tag-dot"></span> Deep Research</span>
      </div>

      <div style="flex: 1; display: flex; gap: 20px; align-items: start;">

        <!-- Section 1: Geographical Scope -->
        <div class="substep" data-substep="0" style="flex: 1;">
          <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden; height: 100%;">
            <div style="padding: 12px 20px; background: var(--accent-soft); display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border);">
              <div class="step-number" style="width: 24px; height: 24px; font-size: 11px;">1</div>
              <span style="font-size: 14px; color: var(--fg); font-weight: 500;">Geographical Scope</span>
            </div>
            <div style="padding: 10px 20px; display: flex; flex-direction: column; gap: 0;">
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q00</span>Main establishment or registered office location</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q01</span>Estimated monthly active EU users</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q02</span>Interface / support in EU languages</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q03</span>Transactions in EUR or EU currencies</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q04</span>EU users can order / access service</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q05</span>Union-specific TLDs (.eu, .de, .fr&hellip;)</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q06</span>Mobile app in EU app stores</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0;"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q07</span>Accessible from EU IPs (no geo-blocking)</p>
            </div>
          </div>
        </div>

        <!-- Section 2: Company Size -->
        <div class="substep" data-substep="1" style="flex: 0.45;">
          <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden; height: 100%;">
            <div style="padding: 12px 20px; background: var(--accent-soft); display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border);">
              <div class="step-number" style="width: 24px; height: 24px; font-size: 11px;">2</div>
              <span style="font-size: 14px; color: var(--fg); font-weight: 500;">Company Size</span>
            </div>
            <div style="padding: 10px 20px; display: flex; flex-direction: column; gap: 0;">
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q08</span>Number of staff members</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0;"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q09</span>Annual turnover &le;&euro;10M</p>
            </div>
          </div>
        </div>

        <!-- Section 3: Type of Service -->
        <div class="substep" data-substep="2" style="flex: 1;">
          <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden; height: 100%;">
            <div style="padding: 12px 20px; background: var(--accent-soft); display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border);">
              <div class="step-number" style="width: 24px; height: 24px; font-size: 11px;">3</div>
              <span style="font-size: 14px; color: var(--fg); font-weight: 500;">Type of Service</span>
            </div>
            <div style="padding: 10px 20px; display: flex; flex-direction: column; gap: 0;">
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q10</span>Mere conduit &mdash; transmits without storing</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q11</span>Caching &mdash; temporary copies for speed</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q12</span>Search engine &mdash; indexes the web</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q13</span>Hosting &mdash; stores user content</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0; border-bottom: 1px solid var(--border);"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q14</span>Online platform &mdash; disseminates to public</p>
              <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.5; padding: 8px 0;"><span class="mono" style="color: var(--text-faint); font-size: 10px; margin-right: 8px;">q15</span>Marketplace &mdash; sellers to consumers</p>
            </div>
          </div>
        </div>

      </div>

      <div class="slide-footer">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 9 — Deep Research: Inside an Agent (q14)
       ============================ -->
  <div class="slide" data-steps="4">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 28px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div class="step-number" style="width: 40px; height: 40px; font-size: 16px;">2</div>
          <h2 style="font-size: 38px;">Inside a Research Agent</h2>
        </div>
        <span class="tag"><span class="tag-dot"></span> Deep Research &mdash; q14</span>
      </div>

      <!-- Step 0: The question, big and clear -->
      <div class="substep" data-substep="0" style="margin-bottom: 24px;">
        <div style="display: flex; align-items: center; gap: 20px; padding: 20px 28px; border: 2px solid var(--fg); background: rgba(255,255,255,0.5);">
          <span class="mono" style="font-size: 12px; color: var(--text-faint);">q14</span>
          <div>
            <p style="font-size: 22px; color: var(--fg); font-family: var(--font-serif);">Does this company operate an online platform?</p>
            <p style="font-size: 13px; color: var(--text-muted); margin-top: 4px;">A service that stores and disseminates information to the public at the request of a recipient</p>
          </div>
        </div>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; flex: 1; align-items: start;">

        <!-- Left: Legal brief (Step 1) -->
        <div class="substep" data-substep="1">
          <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">
            <div style="padding: 12px 20px; background: var(--fg); display: flex; align-items: center; gap: 10px;">
              <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; stroke: white; fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round;"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
              <span style="font-size: 13px; color: white; font-weight: 500;">Legal Brief</span>
              <span style="font-size: 11px; color: rgba(255,255,255,0.5); margin-left: auto;">provided to agent</span>
            </div>
            <div style="padding: 20px;">
              <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 12px;">
                An online platform is a hosting service that <strong style="color: var(--fg);">stores and disseminates information to the public</strong> at the request of a recipient of the service.
              </p>
              <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 12px;">
                The key legal distinction is <em>dissemination</em> &mdash; making information available to a <strong style="color: var(--fg);">potentially unlimited number</strong> of third parties.
              </p>
              <div style="padding: 12px 16px; background: var(--accent-soft); margin-top: 8px;">
                <p style="font-size: 12px; color: var(--fg); font-weight: 500; margin-bottom: 6px;">Exclusions:</p>
                <p style="font-size: 12px; color: var(--text-muted); line-height: 1.6;">
                  Comment sections (ancillary feature), cloud storage (minor), private messaging (finite recipients)
                </p>
                <p style="font-size: 12px; color: var(--fg); font-weight: 500; margin-top: 8px;">VLOP threshold:</p>
                <p style="font-size: 12px; color: var(--text-muted); line-height: 1.6;">&ge;45 million monthly active EU users</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: Search queries (Step 2) + Result (Step 3) -->
        <div style="display: flex; flex-direction: column; gap: 16px;">

          <div class="substep" data-substep="2">
            <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">
              <div style="padding: 12px 20px; background: var(--accent-soft); display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border);">
                <img src="logo_tavily.png" alt="Tavily" style="height: 14px;" />
                <span style="font-size: 13px; color: var(--fg); font-weight: 500;">Web Search</span>
                <span style="font-size: 11px; color: var(--text-faint); margin-left: auto;">3 queries</span>
              </div>
              <div style="padding: 16px 20px; display: flex; flex-direction: column; gap: 12px;">
                <div style="display: flex; gap: 12px; align-items: start;">
                  <span class="mono" style="font-size: 10px; color: var(--text-faint); margin-top: 3px; flex-shrink: 0;">1</span>
                  <div>
                    <p class="mono" style="font-size: 11px; color: var(--fg);">&ldquo;Apple Inc user generated content public dissemination&rdquo;</p>
                    <p style="font-size: 11px; color: var(--text-faint); margin-top: 4px; line-height: 1.4;">&rarr; App Store reviews, Apple Music social features, iMessage public channels&hellip;</p>
                  </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                  <span class="mono" style="font-size: 10px; color: var(--text-faint); margin-top: 3px; flex-shrink: 0;">2</span>
                  <div>
                    <p class="mono" style="font-size: 11px; color: var(--fg);">&ldquo;App Store user reviews public visibility scope&rdquo;</p>
                    <p style="font-size: 11px; color: var(--text-faint); margin-top: 4px; line-height: 1.4;">&rarr; Reviews publicly visible to all App Store visitors, not limited audience&hellip;</p>
                  </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: start;">
                  <span class="mono" style="font-size: 10px; color: var(--text-faint); margin-top: 3px; flex-shrink: 0;">3</span>
                  <div>
                    <p class="mono" style="font-size: 11px; color: var(--fg);">&ldquo;Apple designated VLOP DSA European Commission&rdquo;</p>
                    <p style="font-size: 11px; color: var(--text-faint); margin-top: 4px; line-height: 1.4;">&rarr; EC designated App Store as VLOP on 25 April 2023 under DSA&hellip;</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="substep" data-substep="3">
            <div style="border: 2px solid var(--fg); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">
              <div style="padding: 12px 20px; background: var(--accent-soft); display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border);">
                <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.08em;">Agent Answer</span>
              </div>
              <div style="padding: 16px 20px;">
                <p style="font-size: 14px; color: var(--fg); font-weight: 500; margin-bottom: 8px;">Yes &mdash; Apple operates an online platform</p>
                <p style="font-size: 12px; color: var(--text-secondary); line-height: 1.6;">
                  The App Store stores and publicly disseminates user-generated reviews to an unlimited audience. Additionally, the European Commission designated the App Store as a Very Large Online Platform (VLOP) under the DSA on 25 April 2023.
                </p>
                <div style="display: flex; align-items: center; gap: 12px; margin-top: 12px; padding-top: 10px; border-top: 1px solid var(--border);">
                  <span class="mono" style="font-size: 10px; background: var(--fg); color: white; padding: 3px 10px;">HIGH CONFIDENCE</span>
                  <span style="font-size: 11px; color: var(--text-faint);">3 sources cited</span>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

      <div class="slide-footer">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 10 — Deep Research: Complete
       ============================ -->
  <div class="slide" data-steps="2">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 28px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div class="step-number" style="width: 40px; height: 40px; font-size: 16px;">2</div>
          <h2 style="font-size: 38px;">Research Complete</h2>
        </div>
        <span class="tag"><span class="tag-dot"></span> Deep Research</span>
      </div>

      <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 28px; max-width: 720px;">

        <!-- Step 0: All 16 results -->
        <div class="substep" data-substep="0">
          <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">
            <div style="padding: 14px 24px; background: var(--accent-soft); display: flex; align-items: center; gap: 12px; border-bottom: 1px solid var(--border);">
              <span style="font-size: 15px; color: var(--fg); font-weight: 500;">Apple Inc. &mdash; Company Profile</span>
              <span class="mono" style="font-size: 11px; color: var(--text-faint); margin-left: auto;">16 / 16 answered</span>
            </div>
            <div style="padding: 16px 24px; display: flex; flex-direction: column; gap: 10px;">
              <div style="display: flex; align-items: center; gap: 16px; padding-bottom: 10px; border-bottom: 1px solid var(--border);">
                <div class="step-number" style="width: 24px; height: 24px; font-size: 10px;">1</div>
                <p style="font-size: 14px; color: var(--fg); font-weight: 500; flex: 1;">Geographical Scope</p>
                <div style="display: flex; gap: 4px;">
                  <span class="mono" style="font-size: 9px; background: var(--fg); color: white; padding: 2px 6px;">8/8</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 16px; padding-bottom: 10px; border-bottom: 1px solid var(--border);">
                <div class="step-number" style="width: 24px; height: 24px; font-size: 10px;">2</div>
                <p style="font-size: 14px; color: var(--fg); font-weight: 500; flex: 1;">Company Size</p>
                <div style="display: flex; gap: 4px;">
                  <span class="mono" style="font-size: 9px; background: var(--fg); color: white; padding: 2px 6px;">2/2</span>
                </div>
              </div>
              <div style="display: flex; align-items: center; gap: 16px;">
                <div class="step-number" style="width: 24px; height: 24px; font-size: 10px;">3</div>
                <p style="font-size: 14px; color: var(--fg); font-weight: 500; flex: 1;">Type of Service</p>
                <div style="display: flex; gap: 4px;">
                  <span class="mono" style="font-size: 9px; background: var(--fg); color: white; padding: 2px 6px;">6/6</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 1: What each answer contains + handoff -->
        <div class="substep" data-substep="1">
          <div style="display: flex; gap: 20px;">
            <div style="flex: 1; border: 1px solid var(--border); background: rgba(255,255,255,0.45); padding: 20px;">
              <p style="font-size: 13px; color: var(--fg); font-weight: 500; margin-bottom: 10px;">Each answer contains:</p>
              <div style="display: flex; flex-direction: column; gap: 6px;">
                <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5; padding-left: 12px; border-left: 2px solid var(--border-strong);">A structured finding with yes/no + explanation</p>
                <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5; padding-left: 12px; border-left: 2px solid var(--border-strong);">Confidence level (high / medium / low)</p>
                <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5; padding-left: 12px; border-left: 2px solid var(--border-strong);">Sources with URLs for verification</p>
              </div>
            </div>
            <div style="flex: 1; border: 2px solid var(--fg); background: rgba(255,255,255,0.45); padding: 20px; display: flex; flex-direction: column; justify-content: center;">
              <p style="font-size: 14px; color: var(--fg); font-weight: 500; margin-bottom: 6px;">Next step &rarr;</p>
              <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                Full profile presented for <strong style="color: var(--fg);">human validation</strong>
              </p>
            </div>
          </div>
        </div>

      </div>

      <div class="slide-footer">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 8 — Human Validation
       ============================ -->
  <div class="slide">
    <div class="slide-inner">
      <div class="slide-header anim-fade anim-d1">
        <span class="logo">Corinna</span>
        <span class="tag"><span class="tag-dot"></span> Human Validation</span>
      </div>
      <div class="grid-2" style="align-items: start; gap: 64px;">
        <div style="display: flex; flex-direction: column; gap: 24px;">
          <h2 class="anim-fade anim-d2" style="font-size: 40px;">The human decides</h2>
          <ul class="clean">
            <li class="anim-fade anim-d3" style="font-size: 16px;">System pauses before assessment</li>
            <li class="anim-fade anim-d3" style="font-size: 16px;">Every research finding presented for review</li>
            <li class="anim-fade anim-d4" style="font-size: 16px;">AI research can be bypassed entirely</li>
            <li class="anim-fade anim-d4" style="font-size: 16px;">Manual data entry always available</li>
          </ul>
        </div>
        <div style="display: flex; flex-direction: column; gap: 0;">
          <div class="anim-fade anim-d3" style="display: flex; gap: 20px; padding: 24px 0; border-bottom: 1px solid var(--border);">
            <div class="step-number" style="width: 28px; height: 28px; font-size: 11px; margin-top: 2px;">&#10003;</div>
            <div>
              <p style="font-weight: 500; color: var(--fg); margin-bottom: 4px; font-size: 15px;">Accept</p>
              <p style="font-size: 14px; color: var(--text-muted); line-height: 1.6;">The AI finding is correct &mdash; proceed with it as-is.</p>
            </div>
          </div>
          <div class="anim-fade anim-d4" style="display: flex; gap: 20px; padding: 24px 0; border-bottom: 1px solid var(--border);">
            <div class="step-number" style="width: 28px; height: 28px; font-size: 11px; margin-top: 2px;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; stroke: white; fill: none; stroke-width: 2; stroke-linecap: round;"><path d="M12 20h9"/><path d="M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"/></svg>
            </div>
            <div>
              <p style="font-weight: 500; color: var(--fg); margin-bottom: 4px; font-size: 15px;">Edit</p>
              <p style="font-size: 14px; color: var(--text-muted); line-height: 1.6;">Override with own knowledge</p>
            </div>
          </div>
          <div class="anim-fade anim-d5" style="display: flex; gap: 20px; padding: 24px 0; border-bottom: 1px solid var(--border);">
            <div class="step-number" style="width: 28px; height: 28px; font-size: 11px; margin-top: 2px;">?</div>
            <div>
              <p style="font-weight: 500; color: var(--fg); margin-bottom: 4px; font-size: 15px;">Ask Corinna</p>
              <p style="font-size: 14px; color: var(--text-muted); line-height: 1.6;">Get a plain-language explanation via chat</p>
            </div>
          </div>
          <div class="anim-fade anim-d6" style="display: flex; gap: 20px; padding: 24px 0;">
            <div class="step-number" style="width: 28px; height: 28px; font-size: 11px; margin-top: 2px;">
              <svg viewBox="0 0 24 24" style="width: 14px; height: 14px; stroke: white; fill: none; stroke-width: 2; stroke-linecap: round;"><path d="M5 12h14"/></svg>
            </div>
            <div>
              <p style="font-weight: 500; color: var(--fg); margin-bottom: 4px; font-size: 15px;">Skip research entirely</p>
              <p style="font-size: 14px; color: var(--text-muted); line-height: 1.6;">Enter all data manually &mdash; AI research is optional</p>
            </div>
          </div>
        </div>
      </div>
      <div class="slide-footer anim-fade anim-d8">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE — Assessment Agent
       ============================ -->
  <div class="slide" data-steps="3">
    <div class="slide-inner" style="padding: 48px 64px;">
      <div style="display: flex; align-items: center; justify-content: space-between; padding-bottom: 24px; border-bottom: 1px solid var(--border); margin-bottom: 28px;">
        <div style="display: flex; align-items: center; gap: 16px;">
          <div class="step-number" style="width: 40px; height: 40px; font-size: 16px;">3</div>
          <h2 style="font-size: 38px;">Assessment Agent</h2>
        </div>
        <div style="display: flex; align-items: center; gap: 16px;">
          <img src="langgraph_logo.png" alt="LangGraph" style="height: 40px; object-fit: contain;" />
          <img src="deepseek_logo.png" alt="DeepSeek" style="height: 20px; object-fit: contain;" />
        </div>
      </div>

      <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 24px;">

        <!-- Step 0: The two inputs -->
        <div class="substep" data-substep="0">
          <div style="display: flex; gap: 16px;">
            <div style="flex: 1; display: flex; align-items: center; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); background: var(--accent-soft);">
              <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; stroke: var(--fg); fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round; flex-shrink: 0;"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              <div>
                <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.08em;">Input 1</span>
                <p style="font-size: 14px; color: var(--fg); font-weight: 500; margin-top: 2px;">Validated Company Profile</p>
                <p style="font-size: 12px; color: var(--text-muted);">16 answers, human-confirmed</p>
              </div>
            </div>
            <div style="flex: 1; display: flex; align-items: center; gap: 16px; padding: 16px 24px; border: 1px solid var(--border); background: var(--accent-soft);">
              <svg viewBox="0 0 24 24" style="width: 20px; height: 20px; stroke: var(--fg); fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round; flex-shrink: 0;"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
              <div>
                <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.08em;">Input 2</span>
                <p style="font-size: 14px; color: var(--fg); font-weight: 500; margin-top: 2px;">DSA Legal Text</p>
                <p style="font-size: 12px; color: var(--text-muted);">Retrieved per article via RAG</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 1: Per-article assessment flow -->
        <div class="substep" data-substep="1">
          <div style="border: 1px solid var(--border); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">
            <div style="padding: 14px 24px; background: var(--fg); display: flex; align-items: center; gap: 12px;">
              <span style="font-size: 14px; color: white; font-weight: 500;">Assessment Agent</span>
              <span style="font-size: 12px; color: rgba(255,255,255,0.5);">&mdash; runs once per DSA article</span>
              <div style="margin-left: auto; display: flex; gap: 6px;">
                <span class="mono" style="font-size: 9px; padding: 3px 8px; background: rgba(255,255,255,0.15); color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 0.04em;">RAG on DSA</span>
              </div>
            </div>
            <div style="padding: 20px 24px; display: flex; gap: 0;">
              <div style="flex: 1; padding: 16px 20px; border-right: 1px solid var(--border);">
                <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.06em;">Reason</span>
                <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6; margin-top: 8px;">
                  Analyze legal criteria against company profile
                </p>
              </div>
              <div style="flex: 1; padding: 16px 20px; border-right: 1px solid var(--border);">
                <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.06em;">Act</span>
                <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6; margin-top: 8px;">
                  Retrieve article text &amp; recitals via RAG
                </p>
              </div>
              <div style="flex: 1; padding: 16px 20px;">
                <span class="mono" style="font-size: 10px; color: var(--text-faint); text-transform: uppercase; letter-spacing: 0.06em;">Output</span>
                <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.6; margin-top: 8px;">
                  Applicability verdict, reasoning, action items
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2: Summary Agent -->
        <div class="substep" data-substep="2">
          <div style="display: flex; gap: 16px; align-items: stretch;">
            <div style="display: flex; align-items: center; padding: 0 16px;">
              <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">
                <div style="width: 1px; height: 20px; background: var(--border-strong);"></div>
                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; stroke: var(--fg); fill: none; stroke-width: 1.5; stroke-linecap: round; stroke-linejoin: round;"><path d="M12 5v14"/><path d="m19 12-7 7-7-7"/></svg>
              </div>
            </div>
            <div style="flex: 1; border: 2px solid var(--fg); background: rgba(255,255,255,0.45); backdrop-filter: blur(8px); overflow: hidden;">
              <div style="padding: 14px 24px; background: var(--accent-soft); display: flex; align-items: center; gap: 12px; border-bottom: 1px solid var(--border);">
                <span style="font-size: 14px; color: var(--fg); font-weight: 500;">Summary Agent</span>
                <span style="font-size: 12px; color: var(--text-muted);">&mdash; compiles all article-level results into the final report</span>
              </div>
              <div style="padding: 16px 24px; display: flex; gap: 24px;">
                <div style="display: flex; align-items: start; gap: 10px;">
                  <span class="mono" style="font-size: 10px; color: var(--text-faint); margin-top: 3px; flex-shrink: 0;">IN</span>
                  <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5;">Per-article assessment results</p>
                </div>
                <span style="color: var(--text-faint); align-self: center;">&rarr;</span>
                <div style="display: flex; align-items: start; gap: 10px;">
                  <span class="mono" style="font-size: 10px; color: var(--text-faint); margin-top: 3px; flex-shrink: 0;">OUT</span>
                  <p style="font-size: 13px; color: var(--text-secondary); line-height: 1.5;">Full compliance report &mdash; obligations, reasoning, action items (PDF export)</p>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="slide-footer">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 10 — Corinna Chat
       ============================ -->
  <div class="slide">
    <div class="slide-inner">
      <div class="slide-header anim-fade anim-d1">
        <span class="logo">Corinna</span>
        <span class="tag"><span class="tag-dot"></span> Corinna Chat</span>
      </div>
      <div class="grid-2" style="align-items: start; gap: 64px;">
        <div style="display: flex; flex-direction: column; gap: 24px;">
          <h2 class="anim-fade anim-d2" style="font-size: 40px;">A conversation, not a form</h2>
          <ul class="clean">
            <li class="anim-fade anim-d3" style="font-size: 16px;">Chat sidebar available at every step</li>
            <li class="anim-fade anim-d3" style="font-size: 16px;">Context-aware &mdash; knows which step the user is on</li>
            <li class="anim-fade anim-d4" style="font-size: 16px;">Answers grounded in DSA text via RAG</li>
            <li class="anim-fade anim-d4" style="font-size: 16px;">Cites specific articles for verification</li>
          </ul>
        </div>
        <div style="display: flex; flex-direction: column; gap: 16px;">
          <div class="card anim-fade anim-d4" style="display: flex; flex-direction: column; gap: 12px;">
            <span class="tag"><span class="tag-dot"></span> During Research</span>
            <p style="font-size: 14px; line-height: 1.7;">
              &ldquo;What does &lsquo;recommender system&rsquo; mean in the context of the DSA?&rdquo;
            </p>
          </div>
          <div class="card anim-fade anim-d5" style="display: flex; flex-direction: column; gap: 12px;">
            <span class="tag"><span class="tag-dot"></span> During Validation</span>
            <p style="font-size: 14px; line-height: 1.7;">
              &ldquo;The AI says we have 50M EU users but our actual number is lower. Does this affect our classification?&rdquo;
            </p>
          </div>
          <div class="card anim-fade anim-d6" style="display: flex; flex-direction: column; gap: 12px;">
            <span class="tag"><span class="tag-dot"></span> During Assessment</span>
            <p style="font-size: 14px; line-height: 1.7;">
              &ldquo;Explain Article 27 in plain language &mdash; what would we actually need to do?&rdquo;
            </p>
          </div>
        </div>
      </div>
      <div class="slide-footer anim-fade anim-d8">
        <span>CORINNA — DSA COMPLIANCE NAVIGATOR</span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- ============================
       SLIDE 11 — Closing
       ============================ -->
  <div class="slide">
    <div class="slide-inner flex-center flex-col gap-md text-center">
      <div class="anim-fade anim-d1 tag" style="margin-bottom: 8px;">
        <span class="tag-dot"></span>
        <span>Thank You</span>
      </div>
      <h1 class="anim-fade anim-d2" style="font-size: clamp(56px, 8vw, 120px); letter-spacing: -0.02em;">Corinna</h1>
      <div class="anim-fade anim-d3 divider anim-line" style="margin: 8px auto;"></div>
      <p class="anim-fade anim-d4" style="font-style: italic; font-size: 18px; max-width: 500px;">
        Navigate the Digital Services Act with precision.
      </p>
      <div class="anim-fade anim-d5" style="margin-top: 48px; display: flex; flex-direction: column; gap: 8px;">
        <p class="mono" style="font-size: 13px; color: var(--text-muted);">
          Questions?
        </p>
      </div>
      <div class="anim-fade anim-d6 mt-auto">
        <p style="font-size: 12px; color: var(--text-faint); max-width: 560px; line-height: 1.6;">
          Part of <span style="text-decoration: underline;">SNIP &ndash; Self-assessment Network Impact Program</span> (PRIN-PNRR 2023)
          &middot; Universit&agrave; degli Studi di Bari
        </p>
      </div>
    </div>
  </div>

</div>

<!-- Progress bar -->
<div class="progress-bar" id="progress"></div>

<!-- Slide number -->
<div class="slide-number" id="slideNum"></div>

<!-- Nav hint -->
<div class="nav-hint">&larr; &rarr; or click to navigate</div>

<script>
(function () {
  const slides = document.querySelectorAll('.slide');
  const progress = document.getElementById('progress');
  const slideNum = document.getElementById('slideNum');
  let current = 0;

  // Track substep state per slide: -1 means no substeps revealed yet
  const substepState = new Map();

  function getSubsteps(slide) {
    return slide.querySelectorAll('.substep');
  }

  function getTotalSteps(slide) {
    return parseInt(slide.dataset.steps) || 0;
  }

  function getCurrentSubstep(slide) {
    if (!substepState.has(slide)) substepState.set(slide, -1);
    return substepState.get(slide);
  }

  function revealSubstep(slide, index) {
    const sub = slide.querySelector('.substep[data-substep="' + index + '"]');
    if (sub) sub.classList.add('visible');
  }

  function hideAllSubsteps(slide) {
    slide.querySelectorAll('.substep').forEach(function (s) {
      s.classList.remove('visible');
    });
    substepState.set(slide, -1);
  }

  function revealUpTo(slide, index) {
    for (var i = 0; i <= index; i++) {
      revealSubstep(slide, i);
    }
    substepState.set(slide, index);
  }

  function goTo(index) {
    if (index < 0 || index >= slides.length) return;
    slides[current].classList.remove('active');
    current = index;
    slides[current].classList.add('active');
    // Reset substeps when entering a slide
    hideAllSubsteps(slides[current]);
    update();
  }

  function advance() {
    var slide = slides[current];
    var total = getTotalSteps(slide);
    var cur = getCurrentSubstep(slide);

    if (total > 0 && cur < total - 1) {
      // Reveal next substep
      var next = cur + 1;
      revealSubstep(slide, next);
      substepState.set(slide, next);
    } else {
      // Move to next slide
      goTo(current + 1);
    }
  }

  function retreat() {
    var slide = slides[current];
    var total = getTotalSteps(slide);
    var cur = getCurrentSubstep(slide);

    if (total > 0 && cur >= 0) {
      // Hide current substep and go back one
      var sub = slide.querySelector('.substep[data-substep="' + cur + '"]');
      if (sub) sub.classList.remove('visible');
      substepState.set(slide, cur - 1);
    } else {
      // Move to previous slide, reveal all its substeps
      if (current - 1 < 0) return;
      slides[current].classList.remove('active');
      current = current - 1;
      slides[current].classList.add('active');
      var prevSlide = slides[current];
      var prevTotal = getTotalSteps(prevSlide);
      if (prevTotal > 0) {
        revealUpTo(prevSlide, prevTotal - 1);
      }
      update();
    }
  }

  function update() {
    var pct = ((current + 1) / slides.length) * 100;
    progress.style.width = pct + '%';
    slideNum.textContent = String(current + 1).padStart(2, '0') + ' / ' + String(slides.length).padStart(2, '0');
  }

  document.addEventListener('keydown', function (e) {
    if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') {
      e.preventDefault();
      advance();
    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
      e.preventDefault();
      retreat();
    } else if (e.key === 'Home') {
      e.preventDefault();
      goTo(0);
    } else if (e.key === 'End') {
      e.preventDefault();
      goTo(slides.length - 1);
    }
  });

  document.addEventListener('click', function (e) {
    if (e.clientX < window.innerWidth / 3) {
      retreat();
    } else {
      advance();
    }
  });

  let touchStartX = 0;
  document.addEventListener('touchstart', function (e) {
    touchStartX = e.touches[0].clientX;
  });
  document.addEventListener('touchend', function (e) {
    const dx = e.changedTouches[0].clientX - touchStartX;
    if (Math.abs(dx) > 50) {
      dx < 0 ? advance() : retreat();
    }
  });

  update();
})();
</script>

</body>
</html>
